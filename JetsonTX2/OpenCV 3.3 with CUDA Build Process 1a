#!/bin/bash

sudo dpkg -i cuda-repo-l4t-8-0-local_8.0.84-1_arm64.deb

sudo sed -i.bak 's/\(^deb.*main restricted\)\s*$/\1 universe multiverse/g' /etc/apt/sources.list
sudo sed -i.bak 's/\(^deb.*main restricted universe\)\s*$/\1 multiverse/g' /etc/apt/sources.list

sudo apt-get update #30 minutes

sudo apt-get install cuda-toolkit-8.0 libgomp1 libfreeimage-dev libopenmpi-dev openmpi-bin

grep -q "export PATH=.*/usr/local/cuda-8.0/bin" ~/.bashrc || echo "export PATH=/usr/local/cuda-8.0/bin:$PATH">>~/.bashrc

grep -q "export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64" ~/.bashrc || echo "export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH" >> ~/.bashrc

export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH

#MrGibbes - github.com/mrgibbes/buildOpenCVTX2
$ ./buildOpenCV.sh #2 hour
